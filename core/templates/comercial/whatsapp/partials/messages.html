{% for message in messages %}
    {% include 'comercial/whatsapp/partials/message_item.html' with message=message %}
{% empty %}
<div class="text-center text-muted">
    <i class="fas fa-comments fa-3x mb-3"></i>
    <p>Nenhuma mensagem nesta conversa</p>
</div>
{% endfor %}

<script>
// Auto-scroll para última mensagem - mais robusto
function scrollToBottom() {
    const container = document.getElementById('messages-container');
    if (container) {
        // Scroll suave até o final
        container.scrollTo({
            top: container.scrollHeight,
            behavior: 'smooth'
        });
    }
}

// Executa o scroll após um pequeno delay para garantir que o DOM foi atualizado
setTimeout(scrollToBottom, 50);

// Também executa quando imagens ou outros elementos carregam
document.addEventListener('DOMContentLoaded', scrollToBottom);
</script>