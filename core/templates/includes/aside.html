{% load static %}
{% load core_tags %}
<aside id="aside" class='d-none d-lg-block shadow h-100' style="background-color: #333333; overflow-y: auto; scrollbar-width: none; -ms-overflow-style: none;">
    <div class="text-center">
        <img src="{% static 'logo_gruporom.svg' %}" alt="logo" class='img-fluid p-4' style="max-width: 150px">
    </div>
    
    <!-- Informações do usuário -->
    <div class="px-3 pb-3 mb-3 border-bottom border-secondary">
        <div class="d-flex align-items-center">
            <div class="flex-shrink-0">
                <div class="bg-primary bg-opacity-20 p-2 rounded-circle">
                    <i class="fas fa-user text-light"></i>
                </div>
            </div>
            <div class="flex-grow-1 ms-3">
                <div class="fw-bold small text-light">{{ user.pessoa.nome|default:user.username }}</div>
            </div>
        </div>
    </div>
    
    <!-- Câmbio do dia -->
    {% if cambio_hoje %}
    <div class="px-3 pb-3 mb-3 border-bottom border-secondary">
        <div class="d-flex align-items-center">
            <i class="fas fa-dollar-sign text-success me-2"></i>
            <div>
                <div class="fw-bold text-success">R$ {{ dolar_hoje|floatformat:4 }}</div>
                <small class="text-white-50" style="font-size: 0.75rem;">USD/BRL</small>
            </div>
        </div>
    </div>
    {% endif %}
    
    <ul class="nav flex-column">
        {% include 'menu/'|add:area|add:'.html' %}
        
        {% if user.groups.count > 1 %}
        <hr class="my-3 border-secondary">
        <li class="nav-item" style="padding-bottom: 1rem;">
            <a href="#" class="nav-link text-light" data-bs-toggle="modal" data-bs-target="#modalAreas">
                <i class="fas fa-fw fa-th-large text-light"></i> Áreas de Acesso
            </a>
        </li>
        {% endif %}
        
        <!-- Links universais para todos os usuários logados -->
        <hr class="my-3 border-secondary">
        <li class="nav-item">
            <a href="#" class="nav-link text-light" 
               data-bs-toggle="modal" 
               data-bs-target="#modalAlterarSenha"
               hx-get="{% url 'alterar_senha_form' %}"
               hx-target="#modalAlterarSenhaBody"
               hx-swap="innerHTML">
                <i class="fas fa-fw fa-key text-light"></i> Alterar Senha
            </a>
        </li>
        <li class="nav-item">
            <a href="#" class="nav-link text-light" data-bs-toggle="modal" data-bs-target="#modalLogout">
                <i class="fas fa-fw fa-sign-out-alt text-light"></i> Sair
            </a>
        </li>
    </ul>
</aside>
